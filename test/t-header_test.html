<!doctype html>

<html>
  <head>
    <title>t-header test</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../t-header.html">
  </head>
  <body>

    <test-fixture id="loggedInFixture">
      <template>
        <t-header data="[[data]]" user="[[loggedInUser]]"></t-header>
      </template>
    </test-fixture>

    <test-fixture id="anonymousFixture">
      <template>
        <t-header data="[[data]]" user="[[notLoggedInUser]]"></t-header>
      </template>
    </test-fixture>

    <script>

suite('t-header', function() {
  var loggedInHeader;
  var anonymousHeader;
  setup(function(){
    var data = {
      primaryMenu :{
        selectedIndex:0,
        items: [
        {
          label : 'Flight',
          icon : 'maps:flight',
          eventName : 'activity-option-selected'
        },
        {
          label : 'Hotel',
          icon : 'maps:hotel',
          url : 'https://google.com'
        },
        {
          label : 'Car',
          icon : 'maps:directions-car',
          eventName : 'activity-option-selected'
        },
        {
          label : 'Activity',
          icon : 'maps:directions-run',
          eventName : 'activity-option-selected'
        },
        {
          label : 'Flight',
          icon : 'maps:flight',
          url : '/hotel'
        },
        {
          label : 'Hotel',
          icon : 'maps:hotel',
          eventName : 'activity-option-selected'
        },
        {
          label : 'Car',
          icon : 'maps:directions-car',
          eventName : 'activity-option-selected'
        },
        {
          label : 'Activity',
          icon : 'maps:directions-run',
          eventName : 'activity-option-selected'
        }
        ]
      },
      secondaryMenu :[
      {
        label : "Trip Cart",
        icon : "shopping-cart",
        eventName : "trip-cart-link-clicked",
        count: 20
      }
      ],
      recentSearch: {
        label : "Recent Searches",
        icon : "search",
        eventName : "Recent search clicked",
        count: 20
      },
      topBar : {
        signUp : {
          label : 'Sign Up',
          icon : 'icon-url',
          url:'/register'
        },
        signIn : {
          label : 'Sign In',
          icon : 'icon-url',
          url : '/login'
        },
        profile :{
          label : 'Profile',
          url : '/profile'
        },
        mytrips : {
          label : 'My Trips',
          url : '/mytrips'
        },
        email : "enquiry@travelnxt.com",
        emailIcon : 'mail',
        phone : "1800-948-4455",
        phoneIcon : 'communication:phone'
      },
      topStartMenu:[
      {
        "title": "1800-958-1000",
        "icon":  "communication:phone",
        "url": "tel:18009581000"
      },
      {
        "title": "enquiry@travelnxt.com",
        "icon": "mail",
        "url": "mailto:enquiry@travelnxt.com"
      }
      ],
      topEndMenu:[
      {
        "code": "ctr-sel",
        "label": "Country",
        "isIconMenu": true,
        "selectedItem": "0",
        "eventName": "country_changed",
        "options": [
        {"icon":"https://lipis.github.io/flag-icon-css/flags/4x3/af.svg", "title" : "United State(English)", "value" : "en-us" },
        {"icon":"https://lipis.github.io/flag-icon-css/flags/4x3/in.svg", "title" : "India(English)", "value" : "en-in" },
        {"icon":"https://lipis.github.io/flag-icon-css/flags/4x3/in.svg", "title" : "India(English)", "value" : "en-ts" },
        {"icon":"https://lipis.github.io/flag-icon-css/flags/4x3/fo.svg", "title" : "Test Case 2(English)", "value" : "en-uk" },
        {"icon":"https://lipis.github.io/flag-icon-css/flags/4x3/cz.svg", "title" : "Test States 1(English)", "value" : "en-js" }
        ]
      },
      {
        "code": "currency-sel",
        "isIconMenu": false,
        "label": "Currency",
        "selectedItem": "0",
        "eventName": "currency_changed",
        "options": [
        {title:"Australian Dollar", value:"AUD"},
        { title:"Brazilian Real ",value:"BRL" },
        { title:"Danish Krone",value:"DKK" },
        { title:"Czech Koruna",value:"CZK" },
        { title:"Canadian Dollar",value:"CAD" },
        { title : "US Dollar", value :"USD" }
        ]
      }
      ],
      logo : "http://www.tavisca.com/wp-content/uploads/travelnxt.png",
    };

    var notLoggedInUser= {
      "isLoggedIn": true,
      "preLogin": {
        "title": "Sign Up / Sign In",
        "icon": "account-circle",
        "url": "/register"
      },
      "postLogin": {
        "title": "John Doe",
        "icon": "account-circle"
      }
    };


    var loggedInUser= {
      "isLoggedIn": true,
      "preLogin": {
        "title": "Sign Up / Sign In",
        "icon": "account-circle",
        "url": "/register"
      },
      "postLogin": {
        "title": "John Doe",
        "icon": "account-circle"
      }
    };

    loggedInHeader = fixture('loggedInFixture');
    anonymousHeader = fixture('anonymousFixture');
  });

  test('instantiating the element works', function() {
    assert.equal(loggedInHeader.is, 't-header');
    assert.equal(anonymousHeader.is, 't-header');
  });

  test('should display prelogin section if the isloggedIn is false', function() {
    assert.equal(anonymousHeader.$.anonymousSection.hidden, false);
    assert.equal(anonymousHeader.$.userSection.hidden, true);
  });

  test('should display postLogin section if the isloggedIn is true', function() {
    assert.equal(loggedInHeader.$.anonymousSection.hidden, true);
    assert.equal(loggedInHeader.$.userSection.hidden, false);
  });

});
    </script>
  </body>
</html>
